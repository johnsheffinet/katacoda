# Deploy Containers Using Kubectl

# Step 1 - Launch Cluster
minikube version

minikube start

kubectl version --short

kubectl cluster-info

kubectl get cs

kubectl describe cs

kubectl get no

kubectl describe no

# Step 2 - Create Namespace
kubectl create ns bootcamp

kubectl describe ns/bootcamp

# Step 3 - Create Deploy
kubectl create deploy/kubernetes-bootcamp \
--image=gcr.io/google-samples/kubernetes-bootcamp:v1 \
-ns bootcamp

kubectl describe deploy,po \
-ns bootcamp

# Step 4 - Expose Deploy
kubectl expose deploy/kubernetes-bootcamp \
--type=NodePort \
--port=8000 \
--target-port=8080

kubectl describe svc \
-ns bootcamp

curl $(minikube ip):8000

export SVC_IP=$() 

echo $SVC_IP

curl $SVC_IP:8000

export $POD_ENDPOINT=$()

echo $POD_ENDPOINT

curl $POD_ENDPOINT

# Step 5 - Scale Deploy
kubectl scale deploy/kubernetes-bootcamp \
--replicas=3

kubectl get deploy

curl http://$EXTERNAL_IP:8000

# Step 5 - Create, Expose & Scale Deploy
kubectl run http1 \
--image=gcr.io/google-samples/kubernetes-bootcamp:v1 \
--replicas=3 \
--expose=true \
--port=80

kubectl get deploy,po,svc

curl http://$EXTERNAL_IP:8080
